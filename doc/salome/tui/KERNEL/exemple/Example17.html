<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><HTML>
<HEAD>
<!-- hennerik CVSweb $Revision$ -->
<TITLE>Example</TITLE></HEAD>
<BODY BGCOLOR="#eeeeee">
<HR noshade><PRE>#% Check &nbsp;methods : %
SALOMEDS methods : RemoveAttribute, FindOrCreateAttribute, NewStudy, GetAllAttributes, NewCommand, CommitCommand, AbortCommand, NewComponent%

batchmode_geompy.myBuilder._set_UndoLimit(20)

batchmode_geompy.myBuilder.NewCommand() 
child = batchmode_geompy.myBuilder.NewObject(batchmode_geompy.father)
batchmode_geompy.myBuilder.CommitCommand()

batchmode_geompy.myBuilder.NewCommand() 
#==========================================================
# &nbsp; &nbsp; &nbsp; create AttributeSequenceOfReal &nbsp; &nbsp; &nbsp;
#==========================================================
A = batchmode_geompy.myBuilder.FindOrCreateAttribute(child, &quot;AttributeSequenceOfReal&quot;)
if A == None :
 &nbsp; &nbsp; &nbsp; &nbsp;raise &nbsp;RuntimeError, &quot;Can't create AttributeSequenceOfReal attribute&quot;
A = A._narrow(SALOMEDS.AttributeSequenceOfReal)
if A == None :
 &nbsp; &nbsp; &nbsp; &nbsp;raise &nbsp;RuntimeError, &quot;_narrow returns None instead of AttributeSequenceOfReal pointer&quot;

A.Add(0.0293)
A.Add(522)
A.Add(98234)
A.Add(83.287)
batchmode_geompy.myBuilder.CommitCommand()


batchmode_geompy.myBuilder.NewCommand() 
#==========================================================
# &nbsp; &nbsp; &nbsp;create &nbsp;AttributeInteger &nbsp; &nbsp; &nbsp;
#==========================================================
A = batchmode_geompy.myBuilder.FindOrCreateAttribute(child, &quot;AttributeInteger&quot;)
if A == None :
 &nbsp; &nbsp; &nbsp; &nbsp;raise &nbsp;RuntimeError, &quot;Can't create AttributeInteger attribute&quot;
A = A._narrow(SALOMEDS.AttributeInteger)
A.SetValue(1000000)

if A.Value() != 1000000:
 &nbsp; &nbsp; &nbsp; &nbsp;raise &nbsp;RuntimeError, &quot;Error : wrong value of &nbsp;AttributeInteger&quot;

batchmode_geompy.myBuilder.CommitCommand()

batchmode_geompy.myBuilder.NewCommand() #===================
# &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;create AttributeName &nbsp; &nbsp; 
#===========================================================
A = batchmode_geompy.myBuilder.FindOrCreateAttribute(child, &quot;AttributeName&quot;)
if A == None :
 &nbsp; &nbsp; &nbsp; &nbsp;raise &nbsp;RuntimeError, &quot;Can't create AttributeName attribute&quot;
A = A._narrow(SALOMEDS.AttributeName)

if A == None :
 &nbsp; &nbsp; &nbsp; &nbsp;raise &nbsp;RuntimeError, &quot;Can't create AttributeName attribute&quot;
A.SetValue(&quot;AttributesTesting&quot;)

if A.Value() != &quot;AttributesTesting&quot;:
 &nbsp; &nbsp; &nbsp; &nbsp;print &quot;Wrong &nbsp;value of AttributeName&quot; &nbsp; &nbsp; &nbsp; &nbsp;

batchmode_geompy.myBuilder.CommitCommand()

batchmode_geompy.myBuilder.NewCommand() #===================
# &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;create &nbsp; &nbsp; AttributeComment 
#===========================================================
A = batchmode_geompy.myBuilder.FindOrCreateAttribute(child, &quot;AttributeComment&quot;)
if A == None :
 &nbsp; &nbsp; &nbsp; &nbsp;raise &nbsp;RuntimeError, &quot;Can't create AttributeComment attribute&quot;
A = A._narrow(SALOMEDS.AttributeComment)

if A == None :
 &nbsp; &nbsp; &nbsp; &nbsp;raise &nbsp;RuntimeError, &quot;Can't create AttributeComment attribute&quot;

A.SetValue(&quot;GEOM&quot;)

batchmode_geompy.myBuilder.AbortCommand()

batchmode_geompy.myBuilder.NewCommand() #===================
# &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; create &nbsp; AttributePersistentRef &nbsp; 
#===========================================================
A = batchmode_geompy.myBuilder.FindOrCreateAttribute(child, &quot;AttributePersistentRef&quot;)
if A == None :
 &nbsp; &nbsp; &nbsp; &nbsp;raise &nbsp;RuntimeError, &quot;Can't create AttributePersistentRef attribute&quot;
A = A._narrow(SALOMEDS.AttributePersistentRef)

if A == None :
 &nbsp; &nbsp; &nbsp; &nbsp;raise &nbsp;RuntimeError, &quot;Can't create AttributePersistentRef attribute&quot;

A.SetValue(&quot;/tmp/test;1&quot;)
batchmode_geompy.myBuilder.CommitCommand()

batchmode_geompy.myBuilder.NewCommand() &nbsp;#===================================
# &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;create &nbsp; &nbsp;AttributeDrawable &nbsp;
#===========================================================
A = batchmode_geompy.myBuilder.FindOrCreateAttribute(child, &quot;AttributeDrawable&quot;)
if A == None :
 &nbsp; &nbsp; &nbsp; &nbsp;raise &nbsp;RuntimeError, &quot;Can't create AttributeDrawable attribute&quot;
A = A._narrow(SALOMEDS.AttributeDrawable)

if A == None :
 &nbsp; &nbsp; &nbsp; &nbsp;raise &nbsp;RuntimeError, &quot;Can't create AttributeDrawable attribute&quot;

A.SetDrawable(1)

if A.IsDrawable() == 0:
 &nbsp; &nbsp; &nbsp; &nbsp;&quot;Error: wrong value of AttributeDrawable&quot;
batchmode_geompy.myBuilder.CommitCommand()



batchmode_geompy.myBuilder.NewCommand() #===================
# &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;create &nbsp; &nbsp;AttributeSelectable &nbsp;
#===========================================================
A = batchmode_geompy.myBuilder.FindOrCreateAttribute(child, &quot;AttributeSelectable&quot;)
if A == None :
 &nbsp; &nbsp; &nbsp; &nbsp;raise &nbsp;RuntimeError, &quot;Can't create AttributeSelectable attribute&quot;
A = A._narrow(SALOMEDS.AttributeSelectable)

if A == None :
 &nbsp; &nbsp; &nbsp; &nbsp;raise &nbsp;RuntimeError, &quot;Can't create AttributeSelectable attribute&quot;

A.SetSelectable(1)

if A.IsSelectable() == 0:
 &nbsp; &nbsp; &nbsp; &nbsp;&quot;Error: wrong value of AttributeSelectable&quot;
batchmode_geompy.myBuilder.CommitCommand()


batchmode_geompy.myBuilder.NewCommand() #===================
#===========================================================
batchmode_geompy.myBuilder.RemoveAttribute(child,&quot;AttributeSelectable&quot;)
batchmode_geompy.myBuilder.CommitCommand()

# Control the attributes 
#===========================================================

res, A = batchmode_geompy.myBuilder.FindAttribute(child, &quot;AttributeComment&quot;)
print &quot;res = &quot;, res
if A != None :
 &nbsp; &nbsp; &nbsp; &nbsp;print &quot; AttributeComment was found&quot;
else:
 &nbsp; &nbsp; &nbsp; &nbsp;print &quot; AttributeComment is not found. It's correct&quot;

attributes=[]
 
attributes = child.GetAllAttributes()

length = len(attributes)

print &quot;Attributes number = &quot;, length
print attributes
for i in range(0, length) :
 &nbsp; &nbsp; &nbsp; &nbsp;attr = attributes[i]
 &nbsp; &nbsp; &nbsp; &nbsp;if attr is None :
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;print i,&quot;None item of object attributes list&quot;

if length != 5 :
 &nbsp; &nbsp; &nbsp; &nbsp;raise RuntimeError, &quot;Wrong number of attributes&quot;

</PRE>