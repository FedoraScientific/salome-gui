<!DOCTYPE doctype PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
    
  <meta http-equiv="Content-Type"
 content="text/html; charset=iso-8859-1">
    
  <meta name="GENERATOR"
 content="Mozilla/4.73 [en] (WinNT; I) [Netscape]">
  <title>Main Page</title>
     
  <link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
  <body>
 &nbsp; 
<center>
<table width="96%">
 <tbody>
    <tr>
 <td><a href="http://www.opencascade.com"><img
 src="sources/logocorp.gif" border="0" height="46" width="122">
      </a></td>
   <td> 
      <div align="right"><a href="http://www.opencascade.org/SALOME/"><img
 src="sources/application.gif" border="0" height="46" width="108">
      </a></div>
 </td>
 </tr>
 
  </tbody>
</table>
</center>
   
<h1><a name="page2">Examples</a> </h1>
   <font color="#3333ff">//There is a CXX example of LifeCycleCORBA using<br>
</font><br>
#include CORBA_CLIENT_HEADER(TestComponent)<br>
#include "SALOME_NamingService.hxx"<br>
#include "SALOME_LifeCycleCORBA.hxx"<br>
<br>
int main (int argc, char * argv[]){<br>
&nbsp; try {<br>
<font color="#3333ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Initializing omniORB<br>
</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CORBA::ORB_var orb = CORBA::ORB_init(argc,
argv);<br>
&nbsp;&nbsp;&nbsp; <br>
<font color="#3333ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Obtain a reference
to the root POA<br>
</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CORBA::Object_var obj = orb-&gt;resolve_initial_references("RootPOA")
;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PortableServer::POA_var poa = PortableServer::POA::_narrow(obj)
;<br>
&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SALOME_NamingService _NS(orb) ;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SALOME_LifeCycleCORBA _LCC(&amp;_NS) ;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Engines::Component_var myComponent = _LCC.FindOrLoad_Component("FactoryServerPy","TestComponentPy");<br>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; if(!CORBA::is_nil(myComponent)){<br>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Engines::TestComponent_var
myConcreateComponent = TestComponent::_narrow(myComponent);<br>
<font color="#3333ff">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; //do something
what you like with the interface<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ...<br>
</font>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; return 0;<br>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp; }<br>
&nbsp; catch(CORBA::COMM_FAILURE&amp; ex){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;"Caught system exception COMM_FAILURE
-- unable to contact the object.\n";<br>
&nbsp; }catch(CORBA::SystemException&amp;){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;"Caught a CORBA::SystemException.\n";<br>
&nbsp; }catch(CORBA::Exception&amp;){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;"Caught CORBA::Exception.\n";<br>
&nbsp; }catch(...){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;"Caught unknown exception.\n";<br>
&nbsp; }<br>
&nbsp; return 1;<br>
}<br>
<br>
<font color="#3333ff">#The example may be rewritten on Python like this:<br>
</font><br>
from omniORB import CORBA<br>
from SALOME_TestComponent import *<br>
from SALOME_NamingServicePy import *<br>
from LifeCycleCORBA import *<br>
<br>
try:<br>
&nbsp;&nbsp;&nbsp; orb = CORBA.ORB_init(sys.argv,CORBA.ORB_ID)<br>
&nbsp;&nbsp;&nbsp; _NS = SALOME_NamingService(orb)<br>
&nbsp;&nbsp;&nbsp; _LCC = SALOME_LifeCycleCORBA(orb)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp; myComponent = _LCC.FindOrLoadComponent("FactoryServerPy","TestComponentPy");<br>
&nbsp;&nbsp;&nbsp; &nbsp;myConcreatComponent = myComponent._narrow(TestComponent)<br>
&nbsp;&nbsp;&nbsp; if myConcreatComponent is not None :<font
 color="#3333ff"><br>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; //do something what you like with the
interface<br>
 &nbsp; &nbsp; &nbsp; &nbsp; ...<br>
 </font>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return 0<br>
&nbsp;&nbsp;&nbsp; }<br>
except CosNaming.NamingContext.NotFound, e :<br>
&nbsp;&nbsp;&nbsp; print "Caught exception: Naming Service can't found Logger"<br>
except CORBA.COMM_FAILURE, e:<br>
&nbsp;&nbsp;&nbsp; print "Caught CORBA::SystemException CommFailure"<br>
except CORBA.SystemException, e:<br>
&nbsp;&nbsp;&nbsp; print "Caught CORBA::SystemException."<br>
except CORBA.Exception, e:<br>
&nbsp;&nbsp;&nbsp; print "Caught CORBA::Exception."<br>
except Exception, e:<br>
&nbsp;&nbsp;&nbsp; print "Caught unknown exception."<br>
&nbsp;&nbsp; <br>
<br>
<br>
</body>
</html>
