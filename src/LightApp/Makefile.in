#  Copyright (C) 2005  CEA/DEN, EDF R&D, OPEN CASCADE, PRINCIPIA R&D
#
#  This library is free software; you can redistribute it and/or
#  modify it under the terms of the GNU Lesser General Public
#  License as published by the Free Software Foundation; either
#  version 2.1 of the License.
#
#  This library is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
#  Lesser General Public License for more details.
#
#  You should have received a copy of the GNU Lesser General Public
#  License along with this library; if not, write to the Free Software
#  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA
#
# See http://www.salome-platform.org/ or email : webmaster.salome@opencascade.com
#
#  File   : Makefile.in
#  Author : OCC team (OCN)
#  Module : LightApp
#  $Header$

top_srcdir=@top_srcdir@
top_builddir=../..
srcdir=@srcdir@
VPATH=.:@srcdir@:@srcdir@/resources


@COMMENCE@

# header files 
EXPORT_HEADERS= LightApp.h \
		LightApp_AboutDlg.h \
		LightApp_Application.h \
		LightApp_DataModel.h \
		LightApp_DataObject.h \
		LightApp_DataOwner.h \
		LightApp_DataSubOwner.h \
		LightApp_Dialog.h \
		LightApp_Displayer.h \
		LightApp_Driver.h \
		LightApp_HDFDriver.h \
		LightApp_Module.h \
		LightApp_ModuleDlg.h \
		LightApp_NameDlg.h \
		LightApp_OBFilter.h \
		LightApp_OBSelector.h \
		LightApp_Operation.h \
		LightApp_Selection.h \
		LightApp_SelectionMgr.h \
		LightApp_ShowHideOp.h \
		LightApp_Study.h \
		LightApp_SwitchOp.h \
		LightApp_Preferences.h \
		LightApp_PreferencesDlg.h \
		LightApp_RootObject.h \
		LightApp_UpdateFlags.h \
		LightApp_WidgetContainer.h

ifneq ($(DISABLE_VTKVIEWER),yes)
ifneq ($(DISABLE_SALOMEOBJECT),yes)
  EXPORT_HEADERS+= LightApp_VTKSelector.h
endif
endif
ifneq ($(DISABLE_OCCVIEWER),yes)
  EXPORT_HEADERS+= LightApp_OCCSelector.h
endif
ifneq ($(DISABLE_GLVIEWER),yes)
  EXPORT_HEADERS+= LightApp_GLSelector.h
endif

# .po files to transform in .qm
PO_FILES = LightApp_images.po \
	   LightApp_msg_en.po

# Libraries targets
LIB = libLightApp.la

LIB_SRC= LightApp_AboutDlg.cxx \
	 LightApp_Application.cxx \
	 LightApp_DataModel.cxx \
	 LightApp_DataObject.cxx \
	 LightApp_DataOwner.cxx \
	 LightApp_DataSubOwner.cxx \
	 LightApp_Dialog.cxx \
	 LightApp_Displayer.cxx \
	 LightApp_Driver.cxx \
	 LightApp_HDFDriver.cxx \
	 LightApp_Module.cxx \
	 LightApp_ModuleDlg.cxx \
	 LightApp_NameDlg.cxx \
	 LightApp_OBFilter.cxx \
	 LightApp_OBSelector.cxx \
	 LightApp_Operation.cxx \
	 LightApp_Selection.cxx \
	 LightApp_SelectionMgr.cxx \
	 LightApp_ShowHideOp.cxx \
	 LightApp_Study.cxx \
	 LightApp_SwitchOp.cxx \
	 LightApp_Preferences.cxx \
	 LightApp_PreferencesDlg.cxx \
	 LightApp_WidgetContainer.cxx

ifneq ($(DISABLE_VTKVIEWER),yes)
ifneq ($(DISABLE_SALOMEOBJECT),yes)
  LIB_SRC+= LightApp_VTKSelector.cxx
endif
endif
ifneq ($(DISABLE_OCCVIEWER),yes)
  LIB_SRC+= LightApp_OCCSelector.cxx
endif
ifneq ($(DISABLE_GLVIEWER),yes)
  LIB_SRC+= LightApp_GLSelector.cxx
endif

LIB_MOC = LightApp_AboutDlg.h \
	  LightApp_Application.h \
	  LightApp_DataModel.h \
	  LightApp_Dialog.h \
	  LightApp_OBSelector.h \
	  LightApp_Operation.h \
	  LightApp_Module.h \
	  LightApp_ModuleDlg.h \
	  LightApp_NameDlg.h \
	  LightApp_SelectionMgr.h \
	  LightApp_ShowHideOp.h \
	  LightApp_Study.h \
	  LightApp_SwitchOp.h \
	  LightApp_Preferences.h \
	  LightApp_PreferencesDlg.h \
	  LightApp_WidgetContainer.h

ifneq ($(DISABLE_VTKVIEWER),yes)
ifneq ($(DISABLE_SALOMEOBJECT),yes)
  LIB_MOC+= LightApp_VTKSelector.h
endif
endif
ifneq ($(DISABLE_OCCVIEWER),yes)
  LIB_MOC+= LightApp_OCCSelector.h
endif
ifneq ($(DISABLE_GLVIEWER),yes)
  LIB_MOC+= LightApp_GLSelector.h
endif

RESOURCES_FILES = icon_about.png \
		  icon_applogo.png \
		  icon_default.png \
		  icon_module.png \
		  icon_module_big.png \
		  icon_select.png \
		  LightApp.ini \
		  LightApp.xml

CPPFLAGS+=$(PYTHON_INCLUDES) $(QT_INCLUDES) $(OCC_INCLUDES) \
	$(HDF5_INCLUDES) $(KERNEL_CXXFLAGS)

ifneq ($(DISABLE_VTKVIEWER),yes)
  CPPFLAGS+= $(VTK_INCLUDES)
else
  CPPFLAGS+= -DDISABLE_VTKVIEWER
endif
ifneq ($(DISABLE_PLOT2DVIEWER),yes)
  CPPFLAGS+= $(QWT_INCLUDES)
else
  CPPFLAGS+= -DDISABLE_PLOT2DVIEWER
endif
ifeq ($(DISABLE_OCCVIEWER),yes)
  CPPFLAGS+= -DDISABLE_OCCVIEWER
endif
ifneq ($(DISABLE_PYCONSOLE),yes)
  CPPFLAGS+= $(PYTHON_INCLUDES)
else
  CPPFLAGS+= -DDISABLE_PYCONSOLE
endif
ifeq ($(DISABLE_GLVIEWER),yes)
  CPPFLAGS+= -DDISABLE_GLVIEWER
endif
ifeq ($(DISABLE_SUPERVGRAPHVIEWER),yes)
  CPPFLAGS+= -DDISABLE_SUPERVGRAPHVIEWER
endif
ifeq ($(DISABLE_SALOMEOBJECT),yes)
  CPPFLAGS+= -DDISABLE_SALOMEOBJECT
endif

LDFLAGS+=$(QT_MT_LIBS)
ifneq ($(DISABLE_PYCONSOLE),yes)
  LDFLAGS+= $(PYTHON_LIBS)
endif

LIBS+= -lsuit -lstd -lCAM -lObjBrowser -lLogWindow $(CAS_KERNEL) -lSalomePrs \
	$(HDF5_LIBS) $(KERNEL_LDFLAGS) -lSalomeHDFPersist

ifneq ($(DISABLE_SALOMEOBJECT),yes)
  LIBS+= -lSalomeObject
endif
ifneq ($(DISABLE_VTKVIEWER),yes)
  LIBS+= -lVTKViewer
ifneq ($(DISABLE_SALOMEOBJECT),yes)
  LIBS+= -lSVTK
endif
endif
ifneq ($(DISABLE_OCCVIEWER),yes)
  LIBS+= -lOCCViewer
ifneq ($(DISABLE_SALOMEOBJECT),yes)
  LIBS+= -lSOCC
endif
endif
ifneq ($(DISABLE_GLVIEWER),yes)
  LIBS+= -lGLViewer
endif
ifneq ($(DISABLE_PLOT2DVIEWER),yes)
  LIBS+= -lPlot2d
ifneq ($(DISABLE_SALOMEOBJECT),yes)
  LIBS+= -lSPlot2d
endif
endif
ifneq ($(DISABLE_PYCONSOLE),yes)
  LIBS+= -lPyInterp -lPythonConsole
endif
ifneq ($(DISABLE_SUPERVGRAPHVIEWER),yes)
  LIBS+= -lSUPERVGraph
endif

@CONCLUDE@
